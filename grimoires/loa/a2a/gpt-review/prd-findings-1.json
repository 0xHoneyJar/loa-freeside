{
  "verdict": "CHANGES_REQUIRED",
  "summary": "As written, this PRD mixes “schema-only additive adoption” with requirements that imply runtime behavior changes and it contains a few contract/versioning assumptions that can break convergence or make the work impossible to validate.",
  "blocking_issues": [
    {
      "location": "NFR-2 (Additive Only) vs Goals/FR-4 (Evaluation Geometry Adoption) and FR-2 (Hash chain integration)",
      "issue": "The PRD claims “no runtime behavior changes” but also requires constraint evaluation to “respect explicit evaluation_geometry” (FR-4 AC-4.1) and requires hash-chain verification tests (FR-2 AC-2.4) that imply constructing/validating chained records (runtime semantics).",
      "why_blocking": "Teams can’t satisfy both: either you truly do schema-only adoption (re-exports + fixtures) or you change runtime evaluation/verification logic. This ambiguity will cause scope creep, test failures, or a partial implementation that doesn’t meet acceptance criteria.",
      "fix": "Pick one: (A) Schema-only: change FR-4 to “re-export types + update validators/decoders if any exist, no behavior change” and change FR-2 to “unit-test determinism of computeScoringPathHash only” (no chain verification unless freeside actually builds ScoringPathLog entries). Or (B) Allow minimal runtime changes and update NFR-2 to permit targeted behavior changes in constraint evaluation and audit verification."
    },
    {
      "location": "FR-1 / FR-3 (ADR-001 aliasing) acceptance criteria",
      "issue": "AC-1.2 says to use Governance* aliases from the root barrel, while AC-3.1 requires re-exporting both aliased (root barrel) and direct (subpath) variants. Re-exporting both commonly reintroduces the collision/ambiguity ADR-001 is trying to prevent, especially in TS barrel patterns where names collapse at the consumer import site.",
      "why_blocking": "You can end up with two symbols that look equivalent but are imported from different paths, causing type identity drift, confusing imports, or accidental use of the unaliased governance TaskType that collides with routing-policy TaskType. This can break compilation or silently create the “wrong TaskType” usage.",
      "fix": "Define a single canonical export surface for freeside: re-export ONLY the aliased GovernanceTaskType/GovernanceReputationEvent at the freeside protocol barrel, and do not re-export the unaliased governance TaskType/ReputationEvent names. If you must expose subpath types, expose them under namespaced exports (e.g., `export * as governance from ...`) to avoid top-level collisions."
    },
    {
      "location": "FR-5 (Contract and Conformance Vector Update) + NFR-4 (Contract superset) + Success Criteria #4",
      "issue": "The PRD assumes contract.json can be updated to include “all new governance symbols consumed by the barrel” while also being a strict superset and bumping provider_version_range to >=7.11.0. If any downstream consumer/provider still runs <7.11.0, the contract becomes incompatible even if the code is additive. Also, “entrypoints include new governance exports” is underspecified: is the contract testing the freeside barrel surface, or the hounfour package surface, or both?",
      "why_blocking": "This can fail launch readiness by breaking consumer-driven contract compatibility: a strict superset at the JSON level doesn’t guarantee compatibility when the provider version range is tightened. Ambiguity about what the contract asserts can lead to updating the wrong contract (testing the wrong entrypoint surface), making the contract test meaningless or failing in CI.",
      "fix": "Specify the contract subject precisely: (1) contract asserts freeside’s public protocol barrel exports (consumer surface), and (2) provider is loa-hounfour. Then decide versioning strategy: either keep provider_version_range as a range that includes 7.9.2–7.11.0 while only asserting symbols that exist across that range, OR explicitly declare a breaking contract bump (new contract version) even if schemas are additive. If the intent is to require 7.11.0, state that this is a deliberate compatibility cut and update any dependent repos accordingly."
    },
    {
      "location": "FR-6 (Version pin migration) + Risks (tag fallback) + Success Criteria #1",
      "issue": "The PRD requires pinning to a semver tag “not SHA” but the risk mitigation explicitly allows falling back to a commit SHA of the tag. That violates the success criteria and the stated P0 gap closure rationale (production should pin semver tags).",
      "why_blocking": "This creates a non-closable requirement: if the tag doesn’t resolve in the package manager, the documented fallback fails the goal. Teams may ship with a SHA and still claim completion, leaving the P0 gap unresolved.",
      "fix": "Decide the allowed pin formats and make them consistent: either (A) require npm-published semver (preferred) and treat git-tag resolution failure as a blocker, or (B) accept git tag OR immutable tarball URL, but explicitly disallow raw SHAs. If you must allow SHAs, then change G-6/Success Criteria to “immutable reference” rather than “tag, not SHA,” and explain why that still satisfies launch readiness."
    },
    {
      "location": "FR-1 (TaskType open union) + “All additions are additive — no breaking changes” constraint",
      "issue": "The PRD asserts TaskType is an “open union” with community `namespace:type`. If freeside currently treats TaskType as a closed enum/union anywhere (switch exhaustiveness, Zod/TypeBox literal unions, mapping tables), introducing an open-ended string pattern is a behavioral/validation breaking change in the consumer even if hounfour’s change is additive.",
      "why_blocking": "This is a classic “additive upstream, breaking downstream” failure mode: compilation may pass but runtime validation/routing tables can reject new values or crash on unhandled cases, undermining launch readiness and “zero regression.”",
      "fix": "Add an explicit requirement to audit all TaskType handling in freeside for closed-world assumptions (exhaustive switches, mapping objects keyed by TaskType, validators). Acceptance: either (1) keep freeside using routing-policy TaskType only (and do not introduce governance TaskType into those code paths), or (2) update handling to be open-world safe (default case, pattern validation, unknown passthrough) without changing routing behavior."
    }
  ],
  "question": "",
  "iteration": 1
}
