# Sietch Service Environment Configuration
# Copy this file to .env.local for development

# =============================================================================
# BERACHAIN RPC CONFIGURATION
# =============================================================================

# Comma-separated list of Berachain RPC endpoint URLs (for resilience/fallback)
# Primary endpoint is tried first, others are used as fallback
BERACHAIN_RPC_URLS=https://rpc.berachain.com,https://rpc-backup.berachain.com

# BGT token contract address on Berachain
BGT_ADDRESS=0x0000000000000000000000000000000000000000

# Comma-separated list of reward vault contract addresses
REWARD_VAULT_ADDRESSES=0x0000000000000000000000000000000000000001,0x0000000000000000000000000000000000000002

# =============================================================================
# TRIGGER.DEV CONFIGURATION
# =============================================================================

# trigger.dev project ID
TRIGGER_PROJECT_ID=sietch-service

# trigger.dev secret key (from dashboard)
TRIGGER_SECRET_KEY=tr_dev_xxxxxxxxxxxxxxxxxxxxx

# =============================================================================
# DISCORD BOT CONFIGURATION
# =============================================================================

# Discord bot token from Developer Portal
DISCORD_BOT_TOKEN=your_discord_bot_token_here

# Sietch Discord server (guild) ID
DISCORD_GUILD_ID=000000000000000000

# Channel IDs
DISCORD_CHANNEL_THE_DOOR=000000000000000000
DISCORD_CHANNEL_CENSUS=000000000000000000

# Social Layer Channels (v2.0) - Optional
DISCORD_CHANNEL_SIETCH_LOUNGE=000000000000000000
DISCORD_CHANNEL_NAIB_COUNCIL=000000000000000000
DISCORD_CHANNEL_INTRODUCTIONS=000000000000000000

# Cave Entrance Channel (v2.1) - Optional
# Channel for aspiring members in positions 70-100 to view threshold requirements
DISCORD_CHANNEL_CAVE_ENTRANCE=000000000000000000

# The Oasis Channel (v3.0 - Sprint 17) - Optional
# Exclusive channel for Water Sharer badge holders
DISCORD_CHANNEL_OASIS=000000000000000000

# Announcements Channel (v3.0 - Sprint 20) - Optional
# Channel for weekly community digest posts
DISCORD_CHANNEL_ANNOUNCEMENTS=000000000000000000

# Deep Desert Channel (v3.0) - Optional
# Exclusive channel for Engaged badge holders (5+ badges)
DISCORD_CHANNEL_DEEP_DESERT=000000000000000000

# Stillsuit Lounge Channel (v3.0) - Optional
# Exclusive channel for Veteran badge holders (90+ days)
DISCORD_CHANNEL_STILLSUIT_LOUNGE=000000000000000000

# Role IDs (Core - Required)
DISCORD_ROLE_NAIB=000000000000000000
DISCORD_ROLE_FEDAYKIN=000000000000000000

# Cave Entrance Role (v2.1) - Optional
# Role assigned to waitlist registrations, gives access to Cave Entrance channels
DISCORD_ROLE_TAQWA=000000000000000000

# Former Naib Role (v2.1) - Optional
# Role assigned to members who were previously Naib but were bumped
DISCORD_ROLE_FORMER_NAIB=000000000000000000

# Water Sharer Role (v3.0 - Sprint 17) - Optional
# Role assigned to Water Sharer badge holders (can share badge with one member)
DISCORD_ROLE_WATER_SHARER=000000000000000000

# Engaged Role (v3.0) - Optional
# Role assigned to members with 5+ badges earned
DISCORD_ROLE_ENGAGED=000000000000000000

# Veteran Role (v3.0) - Optional
# Role assigned to members with 90+ days tenure
DISCORD_ROLE_VETERAN=000000000000000000

# =============================================================================
# TIER ROLES (v3.0) - Optional
# =============================================================================
# 9-tier system roles assigned based on BGT holdings
# Colors: Hajra=Sand, Ichwan=Orange, Qanat=Cyan, Sihaya=Green,
#         Mushtamal=Teal, Sayyadina=Indigo, Usul=Purple
# Note: Fedaykin (Blue) and Naib (Gold) are rank-based, not BGT threshold

# Tier 0: Hajra - 6.9+ BGT - Journey of seeking
DISCORD_ROLE_HAJRA=000000000000000000

# Tier 1: Ichwan - 69+ BGT - Brotherhood
DISCORD_ROLE_ICHWAN=000000000000000000

# Tier 2: Qanat - 222+ BGT - Underground water channels
DISCORD_ROLE_QANAT=000000000000000000

# Tier 3: Sihaya - 420+ BGT - Desert spring
DISCORD_ROLE_SIHAYA=000000000000000000

# Tier 4: Mushtamal - 690+ BGT - Inner garden of the sietch
DISCORD_ROLE_MUSHTAMAL=000000000000000000

# Tier 5: Sayyadina - 888+ BGT - Fremen priestess rank
DISCORD_ROLE_SAYYADINA=000000000000000000

# Tier 6: Usul - 1111+ BGT - Base of the pillar
DISCORD_ROLE_USUL=000000000000000000

# =============================================================================
# API CONFIGURATION
# =============================================================================

# Port for Express server
API_PORT=3000

# Host to bind to (use 127.0.0.1 for production behind nginx)
API_HOST=0.0.0.0

# Comma-separated admin API keys in format key:name
# Example: abc123:admin1,def456:admin2
ADMIN_API_KEYS=dev_key:developer

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Path to SQLite database file
DATABASE_PATH=./data/sietch.db

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log level: trace, debug, info, warn, error, fatal
LOG_LEVEL=info

# =============================================================================
# GRACE PERIOD CONFIGURATION
# =============================================================================

# Hours before entering grace period (no revocations during RPC outage)
GRACE_PERIOD_HOURS=24

# =============================================================================
# SOCIAL LAYER CONFIGURATION (v2.0)
# =============================================================================

# Activity Decay Settings
# Decay rate per period (0.0-1.0, default 0.1 = 10%)
ACTIVITY_DECAY_RATE=0.1
# Decay period in hours (default 6)
ACTIVITY_DECAY_PERIOD_HOURS=6
# Points per activity type
ACTIVITY_POINTS_MESSAGE=1
ACTIVITY_POINTS_REACTION_GIVEN=1
ACTIVITY_POINTS_REACTION_RECEIVED=2

# Profile Settings
# Cooldown for nym changes in days (default 30)
NYM_CHANGE_COOLDOWN_DAYS=30
# Launch date for OG badge calculation (ISO 8601 format)
# SOCIAL_LAYER_LAUNCH_DATE=2025-01-01T00:00:00Z
# Max bio length in characters (default 160)
MAX_BIO_LENGTH=160

# Avatar Settings (Drunken Bishop Algorithm)
# Default avatar size in pixels (default 200)
AVATAR_DEFAULT_SIZE=200
# Grid dimensions (default 17x9)
AVATAR_GRID_WIDTH=17
AVATAR_GRID_HEIGHT=9

# Image Processing Settings
# Target PFP size in pixels (default 256)
PFP_SIZE=256
# Max PFP file size in KB (default 500)
MAX_PFP_SIZE_KB=500
# WebP compression quality 1-100 (default 80)
WEBP_QUALITY=80

# =============================================================================
# STRIPE CONFIGURATION (v4.0 - Sprint 23)
# =============================================================================
# Required for Stripe billing integration

# Stripe secret key (from Stripe Dashboard > Developers > API keys)
# Use sk_test_xxx for development, sk_live_xxx for production
STRIPE_SECRET_KEY=sk_test_xxxxxxxxxxxxxxxxxxxxx

# Stripe webhook signing secret (from Stripe Dashboard > Developers > Webhooks)
# Create a webhook endpoint pointing to /api/billing/webhook
STRIPE_WEBHOOK_SECRET=whsec_xxxxxxxxxxxxxxxxxxxxx

# Stripe price IDs for subscription tiers
# Format: "tier:price_id,tier:price_id"
# Example: "basic:price_xxx,premium:price_yyy,exclusive:price_zzz"
STRIPE_PRICE_IDS=basic:price_xxx,premium:price_xxx,exclusive:price_xxx,elite:price_xxx

# =============================================================================
# REDIS CONFIGURATION (v4.0 - Sprint 23)
# =============================================================================
# Required for entitlement caching and webhook deduplication

# Redis connection URL (Upstash Redis recommended)
# Format: redis://username:password@host:port or rediss:// for TLS
REDIS_URL=rediss://default:xxxxx@xxx.upstash.io:6379

# Maximum retry attempts for Redis operations (default: 3)
REDIS_MAX_RETRIES=3

# Connection timeout in milliseconds (default: 5000)
REDIS_CONNECT_TIMEOUT=5000

# Entitlement cache TTL in seconds (default: 300 = 5 minutes)
REDIS_ENTITLEMENT_TTL=300

# =============================================================================
# FEATURE FLAGS (v4.0 - Sprint 23)
# =============================================================================
# Control which v4.0 features are enabled

# Enable Stripe billing integration (default: false)
# Set to true when Stripe is configured and ready
FEATURE_BILLING_ENABLED=false

# Enable Gatekeeper feature gating (default: false)
# Set to true to enforce subscription-based feature access
FEATURE_GATEKEEPER_ENABLED=false

# Enable Redis caching (default: false)
# Set to true when Redis is configured and ready
FEATURE_REDIS_ENABLED=false

# Enable Telegram bot (default: false)
# Set to true when Telegram is configured and ready
FEATURE_TELEGRAM_ENABLED=false

# =============================================================================
# TELEGRAM CONFIGURATION (v4.1 - Sprint 30)
# =============================================================================
# Required for Telegram bot integration with Collab.Land wallet verification

# Telegram bot token from @BotFather
# Create a bot: https://t.me/BotFather -> /newbot
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklmnOPQrstuvWXYZ

# Webhook secret token for validating requests from Telegram
# Generate a random string (32+ chars recommended)
# Required in production (webhook mode)
TELEGRAM_WEBHOOK_SECRET=your_random_webhook_secret_here

# Public webhook URL where Telegram sends updates
# Only set in production - leave empty for development (uses polling)
# Format: https://your-domain.com/telegram/webhook
# TELEGRAM_WEBHOOK_URL=https://api.example.com/telegram/webhook

# Collab.Land verification callback URL (optional)
# URL that Collab.Land will call after wallet verification
# TELEGRAM_VERIFY_CALLBACK_URL=https://api.example.com/telegram/verify/callback
