{"id":"arrakis-10g","title":"S1-T3: Tier→Access Mapper (Default Mapping Only)","description":"- type: task","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-09T05:45:50.186146666Z","updated_at":"2026-02-09T06:26:37.880249744Z","closed_at":"2026-02-09T06:26:37.880125507Z","close_reason":"Default tier mapping 1-3→free, 4-6→pro, 7-9→enterprise. resolveAccess() and validateModelRequest(). Per-community overrides deferred to S3-T8.","compaction_level":0,"original_size":0}
{"id":"arrakis-12h","title":"S4-T6: Agent Auth Middleware + Request Context Builder","description":"- type: task","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-09T05:45:50.186146666Z","updated_at":"2026-02-09T07:52:22.042946980Z","closed_at":"2026-02-09T07:52:22.042860491Z","close_reason":"Auth middleware: tier spoofing prevention, conviction scoring with timeout/cache/fail-closed, header normalization for idempotency/channel. GPT APPROVED iteration 2.","compaction_level":0,"original_size":0}
{"id":"arrakis-184","title":"S2-T2: Agent Rate Limiter","description":"- type: task","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-09T05:45:50.186146666Z","updated_at":"2026-02-09T06:47:57.041059952Z","closed_at":"2026-02-09T06:47:57.040978511Z","close_reason":"Agent rate limiter with NOSCRIPT retry, safe parsing, fail-closed. GPT approved (iteration 2, 3 fixes applied).","compaction_level":0,"original_size":0}
{"id":"arrakis-19w","title":"Task 3.7: BYOK Network-Layer SSRF Defense","description":"ECS Fargate subnet, AWS Network Firewall domain allowlist, SG port 443 only, VPC Flow Log alerts.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-11T01:36:05.112192709Z","created_by":"merlin","updated_at":"2026-02-11T04:17:23.678849913Z","closed_at":"2026-02-11T04:17:23.678756202Z","close_reason":"Created byok-security.tf with Network Firewall domain allowlist, dedicated BYOK subnet, security group (port 443 only), VPC Flow Logs, CloudWatch alarm for denied egress","compaction_level":0,"original_size":0,"labels":["FR-4","cycle-015","security","sprint-3","terraform"],"dependencies":[{"issue_id":"arrakis-19w","depends_on_id":"arrakis-ri7","type":"parent-child","created_at":"2026-02-11T01:36:05.144408973Z","created_by":"merlin"}]}
{"id":"arrakis-1ad","title":"Task 2.5: Document V8 heap string limitation in threat model","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-11T06:31:10.461489782Z","created_by":"merlin","updated_at":"2026-02-11T06:43:39.347164318Z","closed_at":"2026-02-11T06:43:39.347061513Z","close_reason":"Created byok-threat-model.md documenting V8 heap string limitation, SSRF defense-in-depth, and quota bypass mitigation","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"arrakis-1ad","depends_on_id":"arrakis-1uy","type":"parent-child","created_at":"2026-02-11T06:31:10.467753043Z","created_by":"merlin"}]}
{"id":"arrakis-1an","title":"Task 2.1: Ensemble Mapper","description":"Implement EnsembleMapper class. Tier gating, parameter clamping, budget multiplier=N, partial failure reconciliation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-11T01:35:32.869324911Z","created_by":"merlin","updated_at":"2026-02-11T03:55:41.898591327Z","closed_at":"2026-02-11T03:55:41.898565243Z","close_reason":"Implemented EnsembleMapper with tier gating, n/quorum clamping, budget multiplier, partial failure reconciliation, and comprehensive unit tests","compaction_level":0,"original_size":0,"labels":["FR-3","cycle-015","sprint-2"],"dependencies":[{"issue_id":"arrakis-1an","depends_on_id":"arrakis-fj5","type":"parent-child","created_at":"2026-02-11T01:35:32.896475006Z","created_by":"merlin"}]}
{"id":"arrakis-1bz","title":"S5-T4: Observability + Metrics","description":"- type: task","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-09T05:45:50.186146666Z","updated_at":"2026-02-09T08:25:44.884948647Z","closed_at":"2026-02-09T08:25:44.884902464Z","close_reason":"Observability module: Pino redaction paths, wallet hashing, structured metrics, CloudWatch metric names, LogMetricEmitter, request logging helper","compaction_level":0,"original_size":0}
{"id":"arrakis-1c2","title":"Task 3.1: BYOK Database Schema","description":"Create community_byok_keys table migration. Partial unique index, drizzle schema update.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-11T01:36:03.552185575Z","created_by":"merlin","updated_at":"2026-02-11T03:59:07.404287843Z","closed_at":"2026-02-11T03:59:07.404252016Z","close_reason":"Created 0007_community_byok_keys.sql migration with envelope encryption schema, partial unique index, and routing index","compaction_level":0,"original_size":0,"labels":["FR-4","cycle-015","sprint-3"],"dependencies":[{"issue_id":"arrakis-1c2","depends_on_id":"arrakis-ri7","type":"parent-child","created_at":"2026-02-11T01:36:03.577652942Z","created_by":"merlin"}]}
{"id":"arrakis-1j4","title":"Task 3.6: BYOK E2E Test Scenario","description":"invoke_byok E2E scenario: BYOK claims in JWT, BYOK_NO_BUDGET accounting verification.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-02-11T01:36:04.851892281Z","created_by":"merlin","updated_at":"2026-02-11T04:16:02.831595178Z","closed_at":"2026-02-11T04:16:02.831545824Z","close_reason":"BYOK E2E test vector and scenario already exist in tests/e2e/ — invoke_byok covers AC-2.9","compaction_level":0,"original_size":0,"labels":["FR-2","FR-4","cycle-015","sprint-3"],"dependencies":[{"issue_id":"arrakis-1j4","depends_on_id":"arrakis-36t","type":"blocks","created_at":"2026-02-11T01:50:25.614962899Z","created_by":"merlin"},{"issue_id":"arrakis-1j4","depends_on_id":"arrakis-ri7","type":"parent-child","created_at":"2026-02-11T01:36:04.868999163Z","created_by":"merlin"}]}
{"id":"arrakis-1kq","title":"S11-T0: Idempotency State Machine Spec (Flatline SKP-002)","description":"Define unified idempotency state machine: NEW->ACTIVE->COMPLETED/ABORTED/RESUME_LOST. Key reuse rules for retry, reconnect, edit, RESUME_LOST. SSE reconnect edge cases.","status":"closed","priority":2,"issue_type":"task","estimated_minutes":60,"created_at":"2026-02-10T03:44:02.556100592Z","created_by":"merlin","updated_at":"2026-02-10T04:30:48.299609777Z","closed_at":"2026-02-10T04:30:48.299518289Z","close_reason":"Idempotency state machine spec created in idempotency.ts with full JSDoc, state transitions, key derivation, and 44 passing unit tests","compaction_level":0,"original_size":0,"labels":["cycle-011","sprint-11"],"dependencies":[{"issue_id":"arrakis-1kq","depends_on_id":"arrakis-3ka","type":"parent-child","created_at":"2026-02-10T03:44:02.569873054Z","created_by":"merlin"}]}
{"id":"arrakis-1ks","title":"S3-T2: Budget Finalize Lua Script (Idempotent)","description":"- type: task","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-09T05:45:50.186146666Z","updated_at":"2026-02-09T07:24:49.218085002Z","closed_at":"2026-02-09T07:24:49.217932723Z","close_reason":"Budget finalize Lua with idempotency marker, late finalize, input validation. GPT approved with conservative estimated_cost default (fail-safe by design).","compaction_level":0,"original_size":0}
{"id":"arrakis-1mh","title":"Task 2.4: Add ensemble budget runtime assertion","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-11T06:31:10.160934581Z","created_by":"merlin","updated_at":"2026-02-11T06:42:44.839238943Z","closed_at":"2026-02-11T06:42:44.839100564Z","close_reason":"Added ENSEMBLE_BUDGET_OVERRUN alarm to checkBudgetDrift with ensembleN parameter, updated both invoke/stream call sites, 4 new invariant tests pass","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"arrakis-1mh","depends_on_id":"arrakis-1uy","type":"parent-child","created_at":"2026-02-11T06:31:10.166776557Z","created_by":"merlin"}]}
{"id":"arrakis-1nr","title":"S11-T3: req_hash Mismatch Contract Test (IMP-003)","description":"Handle 400 REQ_HASH_MISMATCH. Define computeReqHash() canonicalization. Contract test harness with wire byte recording.","status":"closed","priority":2,"issue_type":"task","estimated_minutes":120,"created_at":"2026-02-10T03:44:03.123858776Z","created_by":"merlin","updated_at":"2026-02-10T04:46:55.499378188Z","closed_at":"2026-02-10T04:46:55.499254859Z","close_reason":"req_hash wire-bytes binding: computeReqHash(), ReqHashMismatchError, SAFE_MESSAGES mapping, 13 unit tests + 1 route test","compaction_level":0,"original_size":0,"labels":["cycle-011","sprint-11"],"dependencies":[{"issue_id":"arrakis-1nr","depends_on_id":"arrakis-3ka","type":"parent-child","created_at":"2026-02-10T03:44:03.137690916Z","created_by":"merlin"}]}
{"id":"arrakis-1nx","title":"S12-T2: JWKS 72h Safety TTL Verification (FR-1.9)","description":"Injectable Clock interface in JWKS cache. FakeClock.advance(ms). Simulated-time tests for 72h/48h TTL.","status":"closed","priority":2,"issue_type":"task","estimated_minutes":180,"created_at":"2026-02-10T03:44:03.964990176Z","created_by":"merlin","updated_at":"2026-02-10T05:55:23.223627231Z","closed_at":"2026-02-10T05:55:23.223529747Z","close_reason":"JWKS 72h TTL contract tests: 16 tests. Injectable Clock interface in JwtService, FakeClock helper, 48h overlap, 72h safety TTL, fail-closed at 73h, sign() clock injection, defense-in-depth d-param strip, thundering herd consistency. GPT: APPROVED (iteration 2).","compaction_level":0,"original_size":0,"labels":["cycle-011","sprint-12"],"dependencies":[{"issue_id":"arrakis-1nx","depends_on_id":"arrakis-j3z","type":"parent-child","created_at":"2026-02-10T03:44:03.977317677Z","created_by":"merlin"}]}
{"id":"arrakis-1ox","title":"S12-T4: Budget Drift Monitoring Job (§4.5.1)","description":"BullMQ 15-min repeatable job. Redis vs PostgreSQL comparison. BUDGET_ACCOUNTING_DRIFT alarm at /bin/zsh.50.","status":"closed","priority":2,"issue_type":"task","estimated_minutes":120,"created_at":"2026-02-10T03:44:04.370041574Z","created_by":"merlin","updated_at":"2026-02-10T06:10:08.527051483Z","closed_at":"2026-02-10T06:10:08.526945985Z","close_reason":"Budget drift monitor implemented with unit conversion fix (×10,000), withTimeout timer cleanup, 23 passing tests","compaction_level":0,"original_size":0,"labels":["cycle-011","sprint-12"],"dependencies":[{"issue_id":"arrakis-1ox","depends_on_id":"arrakis-j3z","type":"parent-child","created_at":"2026-02-10T03:44:04.382135145Z","created_by":"merlin"}]}
{"id":"arrakis-1uw","title":"S3-T5: Stream Reconciliation Worker","description":"- type: task","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-09T05:45:50.186146666Z","updated_at":"2026-02-09T07:39:43.621537044Z","closed_at":"2026-02-09T07:39:43.621457205Z","close_reason":"Stream reconciliation worker with Math.round cents conversion, getUsage null handling, reaper deferral. GPT APPROVED iteration 2.","compaction_level":0,"original_size":0}
{"id":"arrakis-1uy","title":"Sprint 2: Infrastructure, Contract & Observability Hardening (BB3-3 to BB3-7)","status":"open","priority":2,"issue_type":"epic","created_at":"2026-02-11T06:30:59.338059095Z","created_by":"merlin","updated_at":"2026-02-11T06:30:59.338059095Z","compaction_level":0,"original_size":0}
{"id":"arrakis-1vu","title":"Task 1.1: Pool Claim Validator (loa-finn)","description":"Implement PoolClaimValidator class per SDD §3.1.1. Fail-closed, warn/reject modes, tier-based pool_id handling.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-11T01:34:04.892530350Z","created_by":"merlin","updated_at":"2026-02-11T03:40:17.415647559Z","closed_at":"2026-02-11T03:40:17.415618437Z","close_reason":"loa-finn task: Pool Claim Validator implementation lives in loa-finn repo. arrakis-side contract artifacts (schema, test vectors) created in Task 1.4. Cross-repo dependency documented in sprint plan.","compaction_level":0,"original_size":0,"labels":["FR-1","cycle-015","loa-finn","sprint-1"],"dependencies":[{"issue_id":"arrakis-1vu","depends_on_id":"arrakis-38f","type":"parent-child","created_at":"2026-02-11T01:34:04.921146418Z","created_by":"merlin"}]}
{"id":"arrakis-1zk","title":"Task 4.1: CloudWatch EMF Integration","description":"EMF metrics with feature dimensions, pool claim counters, structured log events for metric filters.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-11T01:36:32.121289919Z","created_by":"merlin","updated_at":"2026-02-11T04:21:48.559735178Z","closed_at":"2026-02-11T04:21:48.559664876Z","close_reason":"Created agent-metrics.ts EMF emitter with feature dimension, 15 unit tests pass","compaction_level":0,"original_size":0,"labels":["FR-5","cycle-015","sprint-4"],"dependencies":[{"issue_id":"arrakis-1zk","depends_on_id":"arrakis-21b","type":"parent-child","created_at":"2026-02-11T01:36:32.147364118Z","created_by":"merlin"}]}
{"id":"arrakis-1zu","title":"Task 2.2: AgentGateway Ensemble Integration","description":"Add ensemble field to AgentInvokeRequest, insert validation step, apply budget multiplier.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-11T01:35:33.174317926Z","created_by":"merlin","updated_at":"2026-02-11T03:55:47.353657336Z","closed_at":"2026-02-11T03:55:47.353615693Z","close_reason":"Integrated ensemble validation into AgentGateway invoke/stream between pool resolution and budget reservation, with budget multiplier and ENSEMBLE_ENABLED feature flag","compaction_level":0,"original_size":0,"labels":["FR-3","cycle-015","sprint-2"],"dependencies":[{"issue_id":"arrakis-1zu","depends_on_id":"arrakis-fj5","type":"parent-child","created_at":"2026-02-11T01:35:33.190679567Z","created_by":"merlin"}]}
{"id":"arrakis-21b","title":"Sprint 4: Production Monitoring & Hardening","description":"Establish production observability and graduate security enforcement. FR-5.","status":"closed","priority":3,"issue_type":"epic","created_at":"2026-02-11T01:32:55.931956095Z","created_by":"merlin","updated_at":"2026-02-11T04:25:30.345178983Z","closed_at":"2026-02-11T04:25:30.345093497Z","close_reason":"Sprint 4 complete: EMF metrics (agent-metrics.ts), CloudWatch dashboard + 6 alarms (agent-monitoring.tf), 3 operational runbooks, pool claim graduation to reject mode, feature flag enablement for staging","compaction_level":0,"original_size":0,"labels":["cycle-015","sprint-4"],"dependencies":[{"issue_id":"arrakis-21b","depends_on_id":"arrakis-fj5","type":"blocks","created_at":"2026-02-11T01:50:23.042018855Z","created_by":"merlin"},{"issue_id":"arrakis-21b","depends_on_id":"arrakis-ri7","type":"blocks","created_at":"2026-02-11T01:50:23.311577587Z","created_by":"merlin"}]}
{"id":"arrakis-23e","title":"S2-T1: Rate Limit Lua Script","description":"- type: task","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-09T05:45:50.186146666Z","updated_at":"2026-02-09T06:40:39.763450457Z","closed_at":"2026-02-09T06:40:39.763403489Z","close_reason":"Rate limit Lua script matching SDD §8.1. Sliding window ZSET + token bucket. GPT API unavailable (3 attempts, curl 56).","compaction_level":0,"original_size":0}
{"id":"arrakis-263","title":"Task 4.3: Runbooks","description":"3 runbooks: circuit-breaker-open, budget-drift-high, redis-degraded. Step-by-step procedures.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-02-11T01:36:32.678888490Z","created_by":"merlin","updated_at":"2026-02-11T04:21:49.672527596Z","closed_at":"2026-02-11T04:21:49.672334116Z","close_reason":"Created 3 runbooks: circuit-breaker-open, budget-drift-high, redis-degraded","compaction_level":0,"original_size":0,"labels":["FR-5","cycle-015","sprint-4"],"dependencies":[{"issue_id":"arrakis-263","depends_on_id":"arrakis-21b","type":"parent-child","created_at":"2026-02-11T01:36:32.693574634Z","created_by":"merlin"}]}
{"id":"arrakis-267","title":"S11-T5: Budget Overrun Policy — Max-Cost Ceiling (§4.5.1, IMP-008)","description":"Implement max_cost_micro_cents = 3x estimate in metadata. Drift alerting at 2x/3x thresholds.","status":"closed","priority":2,"issue_type":"task","estimated_minutes":120,"created_at":"2026-02-10T03:44:03.508806842Z","created_by":"merlin","updated_at":"2026-02-10T05:33:24.092023750Z","closed_at":"2026-02-10T05:33:24.091948154Z","close_reason":"Max-cost ceiling (3x estimate in metadata.max_cost_micro_cents), drift metric on any overrun, warn >2x, BUDGET_DRIFT_HIGH alarm >3x. 8 tests, GPT APPROVED.","compaction_level":0,"original_size":0,"labels":["cycle-011","sprint-11"],"dependencies":[{"issue_id":"arrakis-267","depends_on_id":"arrakis-3ka","type":"parent-child","created_at":"2026-02-10T03:44:03.521501564Z","created_by":"merlin"}]}
{"id":"arrakis-27t","title":"S1-T1: IAgentGateway Port Interface","description":"- type: task","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-09T05:45:50.186146666Z","updated_at":"2026-02-09T06:10:44.700523345Z","closed_at":"2026-02-09T06:10:44.700380693Z","close_reason":"IAgentGateway port interface created with all types. AgentHealthStatus renamed to avoid collision with score-service HealthStatus. Types compile clean.","compaction_level":0,"original_size":0}
{"id":"arrakis-2ak","title":"Task 2.3: Add BYOK feature gate to admin routes","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-11T06:31:09.874549280Z","created_by":"merlin","updated_at":"2026-02-11T06:40:21.072482713Z","closed_at":"2026-02-11T06:40:21.072384837Z","close_reason":"Added byokEnabled feature gate to routes, returns 404 BYOK_DISABLED when false, 2 new tests pass","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"arrakis-2ak","depends_on_id":"arrakis-1uy","type":"parent-child","created_at":"2026-02-11T06:31:09.880103651Z","created_by":"merlin"}]}
{"id":"arrakis-2bs","title":"S11-T4: HTTP API Idempotency Enforcement (§9.4, SG-11)","description":"Ensure HTTP invoke/stream use X-Idempotency-Key for idempotent execution. Missing header -> server-generate. SSE reconnect same key.","status":"closed","priority":2,"issue_type":"task","estimated_minutes":180,"created_at":"2026-02-10T03:44:03.319740609Z","created_by":"merlin","updated_at":"2026-02-10T04:51:13.239060394Z","closed_at":"2026-02-10T04:51:13.238948193Z","close_reason":"HTTP API idempotency: X-Idempotency-Key echoed in invoke+stream responses, REQ_HASH_MISMATCH safe message, 5 new route tests (49 total)","compaction_level":0,"original_size":0,"labels":["cycle-011","sprint-11"],"dependencies":[{"issue_id":"arrakis-2bs","depends_on_id":"arrakis-1kq","type":"blocks","created_at":"2026-02-10T03:45:25.216892808Z","created_by":"merlin"},{"issue_id":"arrakis-2bs","depends_on_id":"arrakis-3i5","type":"blocks","created_at":"2026-02-10T03:45:25.611693588Z","created_by":"merlin"},{"issue_id":"arrakis-2bs","depends_on_id":"arrakis-3ka","type":"parent-child","created_at":"2026-02-10T03:44:03.331603374Z","created_by":"merlin"},{"issue_id":"arrakis-2bs","depends_on_id":"arrakis-6zc","type":"blocks","created_at":"2026-02-10T03:45:25.808807401Z","created_by":"merlin"},{"issue_id":"arrakis-2bs","depends_on_id":"arrakis-wvm","type":"blocks","created_at":"2026-02-10T03:45:25.413719416Z","created_by":"merlin"}]}
{"id":"arrakis-2c1","title":"S0-T1: Trust Boundary Document","description":"Document threat model, JWT spec, attack surfaces, BYOK liability, persona injection prevention","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-09T05:45:58.043677091Z","created_by":"merlin","updated_at":"2026-02-09T05:56:13.989757924Z","closed_at":"2026-02-09T05:56:13.989637109Z","close_reason":"Trust boundary document v1.1.0 created and GPT-reviewed (2 iterations, APPROVED)","compaction_level":0,"original_size":0,"labels":["sprint-0"],"dependencies":[{"issue_id":"arrakis-2c1","depends_on_id":"arrakis-gth","type":"parent-child","created_at":"2026-02-09T05:45:58.067661159Z","created_by":"merlin"}]}
{"id":"arrakis-2cc","title":"S4-T1: Agent Gateway Facade","description":"- type: task","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-09T05:45:50.186146666Z","updated_at":"2026-02-09T07:57:35.465303193Z","closed_at":"2026-02-09T07:57:35.465262932Z","close_reason":"Agent gateway facade: invoke/stream lifecycle, finalize-once, reconciliation scheduling, budget warning, cancel-on-4xx. GPT API unavailable (curl 56 x3).","compaction_level":0,"original_size":0}
{"id":"arrakis-2ck","title":"Task 1.2: Pool Mapping Version Claim (cross-repo)","description":"Add pool_mapping_version JWT claim (arrakis) + grace window validation (loa-finn). Redis shared state for first-seen timestamps.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-11T01:34:05.178967401Z","created_by":"merlin","updated_at":"2026-02-11T03:34:15.510893655Z","closed_at":"2026-02-11T03:34:15.510859268Z","close_reason":"arrakis-side: pool_mapping_version claim added to jwt-service.ts via contract-version.ts module. loa-finn-side (Task 1.2b) is in separate repo.","compaction_level":0,"original_size":0,"labels":["FR-1","cross-repo","cycle-015","sprint-1"],"dependencies":[{"issue_id":"arrakis-2ck","depends_on_id":"arrakis-38f","type":"parent-child","created_at":"2026-02-11T01:34:05.199843761Z","created_by":"merlin"},{"issue_id":"arrakis-2ck","depends_on_id":"arrakis-3bs","type":"blocks","created_at":"2026-02-11T01:50:23.589450992Z","created_by":"merlin"}]}
{"id":"arrakis-2fq","title":"S11-T1: STREAM_RESUME_LOST Handling (§4.6.1, FR-1.8)","description":"Implement streamWithResume() and 409 STREAM_RESUME_LOST error handling. JtiReplayError vs StreamResumeLostError differentiation.","status":"closed","priority":2,"issue_type":"task","estimated_minutes":240,"created_at":"2026-02-10T03:44:02.735772633Z","created_by":"merlin","updated_at":"2026-02-10T04:36:49.749685814Z","closed_at":"2026-02-10T04:36:49.749594030Z","close_reason":"StreamResumeLostError and JtiReplayError error types, 409 differentiation in throwOnError, retry logic for JtiReplayError, Last-Event-ID forwarding through gateway to loa-finn, 3 route tests passing","compaction_level":0,"original_size":0,"labels":["cycle-011","sprint-11"],"dependencies":[{"issue_id":"arrakis-2fq","depends_on_id":"arrakis-1kq","type":"blocks","created_at":"2026-02-10T03:45:24.814911576Z","created_by":"merlin"},{"issue_id":"arrakis-2fq","depends_on_id":"arrakis-3ka","type":"parent-child","created_at":"2026-02-10T03:44:02.747868748Z","created_by":"merlin"}]}
{"id":"arrakis-2gi","title":"Task 1.3: Update BYOK test vectors for provider inference + quota","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-11T06:30:59.057051476Z","created_by":"merlin","updated_at":"2026-02-11T06:35:24.128862070Z","closed_at":"2026-02-11T06:35:24.128670291Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"arrakis-2gi","depends_on_id":"arrakis-2z0","type":"parent-child","created_at":"2026-02-11T06:30:59.063492558Z","created_by":"merlin"}]}
{"id":"arrakis-2gk","title":"Task 2.3: Ensemble API Route + JWT Extension","description":"Zod schema for ensemble field, JWT claims, ENSEMBLE_ENABLED feature flag.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-11T01:35:33.412320354Z","created_by":"merlin","updated_at":"2026-02-11T03:55:52.783010990Z","closed_at":"2026-02-11T03:55:52.782973442Z","close_reason":"Added ensemble Zod schema, ENSEMBLE_ENABLED env var/config, ensemble JWT claims (ensemble_strategy, ensemble_n, ensemble_quorum, ensemble_models), and safe error messages in routes","compaction_level":0,"original_size":0,"labels":["FR-3","cycle-015","sprint-2"],"dependencies":[{"issue_id":"arrakis-2gk","depends_on_id":"arrakis-fj5","type":"parent-child","created_at":"2026-02-11T01:35:33.427256817Z","created_by":"merlin"}]}
{"id":"arrakis-2gp","title":"Task 4.2: CloudWatch Dashboard + Alarms","description":"10+ widget dashboard with feature breakdowns, 6 alarms, metric math for error rate, SNS topic.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-11T01:36:32.404903857Z","created_by":"merlin","updated_at":"2026-02-11T04:21:49.123745359Z","closed_at":"2026-02-11T04:21:49.123581467Z","close_reason":"Created agent-monitoring.tf with 11-widget dashboard and 6 alarms per SDD §3.5","compaction_level":0,"original_size":0,"labels":["FR-5","cycle-015","sprint-4","terraform"],"dependencies":[{"issue_id":"arrakis-2gp","depends_on_id":"arrakis-1zk","type":"blocks","created_at":"2026-02-11T01:50:25.882255952Z","created_by":"merlin"},{"issue_id":"arrakis-2gp","depends_on_id":"arrakis-21b","type":"parent-child","created_at":"2026-02-11T01:36:32.422894491Z","created_by":"merlin"}]}
{"id":"arrakis-2gq","title":"S12-T1: Two-Layer Authorization Contract Tests (§7.2.3, FR-2.6)","description":"27 test cases (9 tiers x 3 levels). Versioned tier-policy-fixtures.json. Mock loa-finn ceiling responses.","status":"closed","priority":2,"issue_type":"task","estimated_minutes":180,"created_at":"2026-02-10T03:44:03.769313331Z","created_by":"merlin","updated_at":"2026-02-10T05:49:18.588062495Z","closed_at":"2026-02-10T05:49:18.587902148Z","close_reason":"Two-layer authorization contract tests: 43 tests (27 data-driven from fixtures + override + ceiling + edge cases). Fixtures versioned at tier-policy-fixtures.json. All pass.","compaction_level":0,"original_size":0,"labels":["cycle-011","sprint-12"],"dependencies":[{"issue_id":"arrakis-2gq","depends_on_id":"arrakis-j3z","type":"parent-child","created_at":"2026-02-10T03:44:03.782520446Z","created_by":"merlin"}]}
{"id":"arrakis-2mv","title":"S5-T2: Telegram Agent Handler","description":"- type: task","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-09T05:45:50.186146666Z","updated_at":"2026-02-09T08:25:10.180714303Z","closed_at":"2026-02-09T08:25:10.180620446Z","close_reason":"Telegram /agent handler: streaming with throttled editMessageText, 4096 char limit, error messages, edit-unchanged handling","compaction_level":0,"original_size":0}
{"id":"arrakis-2ni","title":"Task 1.1: Fix BYOK provider inference — all keys route to OpenAI","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-11T06:30:58.481800010Z","created_by":"merlin","updated_at":"2026-02-11T06:34:35.065709295Z","closed_at":"2026-02-11T06:34:35.065496941Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"arrakis-2ni","depends_on_id":"arrakis-2z0","type":"parent-child","created_at":"2026-02-11T06:30:58.498409097Z","created_by":"merlin"}]}
{"id":"arrakis-2sp","title":"Task 4.5: Feature Flag Enablement","description":"Enable ENSEMBLE_ENABLED + BYOK_ENABLED in staging, verify feature dimension metrics, drift=0.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-11T01:36:33.227639684Z","created_by":"merlin","updated_at":"2026-02-11T04:25:23.786643173Z","closed_at":"2026-02-11T04:25:23.786536282Z","close_reason":"Added ensemble_enabled variable to variables.tf, wired ENSEMBLE_ENABLED and BYOK_ENABLED env vars through ECS task definition, enabled all three feature flags (agent, ensemble, byok) in staging tfvars","compaction_level":0,"original_size":0,"labels":["FR-3","FR-4","cycle-015","sprint-4"],"dependencies":[{"issue_id":"arrakis-2sp","depends_on_id":"arrakis-21b","type":"parent-child","created_at":"2026-02-11T01:36:33.247221233Z","created_by":"merlin"},{"issue_id":"arrakis-2sp","depends_on_id":"arrakis-2gp","type":"blocks","created_at":"2026-02-11T01:50:26.472162059Z","created_by":"merlin"}]}
{"id":"arrakis-2ta","title":"S10-T3: X-RateLimit-Policy Header (FR-3.3)","description":"Add X-RateLimit-Policy response header on all agent API responses.","status":"closed","priority":2,"issue_type":"task","estimated_minutes":60,"created_at":"2026-02-10T03:44:02.145754047Z","created_by":"merlin","updated_at":"2026-02-10T04:17:12.843083102Z","closed_at":"2026-02-10T04:17:12.842952230Z","close_reason":"X-RateLimit-Policy header on all agent responses, dimension allowlist validation, 40 passing tests","compaction_level":0,"original_size":0,"labels":["cycle-011","sprint-10"],"dependencies":[{"issue_id":"arrakis-2ta","depends_on_id":"arrakis-36h","type":"parent-child","created_at":"2026-02-10T03:44:02.157614397Z","created_by":"merlin"}]}
{"id":"arrakis-2vi","title":"S0-T2: Verify loa-finn PR #39 Findings Resolved","description":"Confirm all 8 tech debt findings from PR #39 are resolved in loa-finn","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-09T05:45:58.350893951Z","created_by":"merlin","updated_at":"2026-02-09T05:56:22.621919039Z","closed_at":"2026-02-09T05:56:22.621810374Z","close_reason":"External verification task - loa-finn PR #39 findings must be verified in loa-finn repo before Sprint 4 gateway integration. Tracked as dependency.","compaction_level":0,"original_size":0,"labels":["sprint-0"],"dependencies":[{"issue_id":"arrakis-2vi","depends_on_id":"arrakis-gth","type":"parent-child","created_at":"2026-02-09T05:45:58.368167384Z","created_by":"merlin"}]}
{"id":"arrakis-2xa","title":"Task 2.2: Remove Google from contract schema","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-11T06:31:09.583527866Z","created_by":"merlin","updated_at":"2026-02-11T06:36:35.502946083Z","closed_at":"2026-02-11T06:36:35.502755050Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"arrakis-2xa","depends_on_id":"arrakis-1uy","type":"parent-child","created_at":"2026-02-11T06:31:09.590419456Z","created_by":"merlin"}]}
{"id":"arrakis-2xe","title":"S1-T4: Shared Types + Config + Error Messages","description":"- type: task","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-09T05:45:50.186146666Z","updated_at":"2026-02-09T06:31:10.799921796Z","closed_at":"2026-02-09T06:31:10.799771145Z","close_reason":"Config loader with parseBoolEnv/parseIntEnv, zod request schema, budget constants (RESERVATION_TTL_MS, FINALIZED_MARKER_TTL_S, BUDGET_WARNING_THRESHOLD), error messages table, shared types. GPT APPROVED iteration 2.","compaction_level":0,"original_size":0}
{"id":"arrakis-2z0","title":"Sprint 1: Critical Correctness Fixes (BB3-1, BB3-2)","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-02-11T06:30:42.119027412Z","created_by":"merlin","updated_at":"2026-02-11T06:35:24.430166562Z","closed_at":"2026-02-11T06:35:24.429977597Z","compaction_level":0,"original_size":0}
{"id":"arrakis-2zd","title":"S5-T8: loa-finn Test Stub Server","description":"- type: task","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-09T05:45:50.186146666Z","updated_at":"2026-02-09T08:23:18.920847013Z","closed_at":"2026-02-09T08:23:18.920718968Z","close_reason":"loa-finn test stub server: scriptable invoke/stream/usage/health endpoints, SSE behaviors, request logging","compaction_level":0,"original_size":0}
{"id":"arrakis-2zz","title":"S4-T3: Agent API Routes","description":"- type: task","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-09T05:45:50.186146666Z","updated_at":"2026-02-09T08:14:38.806444330Z","closed_at":"2026-02-09T08:14:38.806417982Z","close_reason":"Agent API routes complete: invoke, stream, models, budget, health endpoints with SSE, heartbeat, abort handling, SAFE_MESSAGES error sanitization, rate limit headers","compaction_level":0,"original_size":0}
{"id":"arrakis-30s","title":"S2-T3: Pre-Auth IP Rate Limiter","description":"- type: task","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-09T05:45:50.186146666Z","updated_at":"2026-02-09T06:52:10.654584406Z","closed_at":"2026-02-09T06:52:10.654496214Z","close_reason":"IP rate limiter with true LRU, config validation, clock-drift safety. GPT approved iteration 2.","compaction_level":0,"original_size":0}
{"id":"arrakis-312","title":"S1-T2: JWT Service","description":"- type: task","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-09T05:45:50.186146666Z","updated_at":"2026-02-09T06:25:40.883828938Z","closed_at":"2026-02-09T06:25:40.883741939Z","close_reason":"JWT service with ES256 signing, JWKS endpoint, key rotation, req_hash claim. GPT review found+fixed critical JWKS private key leak. APPROVED iteration 2.","compaction_level":0,"original_size":0}
{"id":"arrakis-32f","title":"Task 1.2: Fix BYOK quota atomicity — GET-then-INCR race condition","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-11T06:30:58.766823940Z","created_by":"merlin","updated_at":"2026-02-11T06:34:35.357795830Z","closed_at":"2026-02-11T06:34:35.357611392Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"arrakis-32f","depends_on_id":"arrakis-2z0","type":"parent-child","created_at":"2026-02-11T06:30:58.773232089Z","created_by":"merlin"}]}
{"id":"arrakis-32m","title":"S2-T4: loa-finn Client","description":"- type: task","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-09T05:45:50.186146666Z","updated_at":"2026-02-09T07:12:14.280960835Z","closed_at":"2026-02-09T07:12:14.280868257Z","close_reason":"loa-finn client with circuit breaker, retry, SSE contract enforcement. GPT API unavailable (3 attempts), verified via tsc + code review.","compaction_level":0,"original_size":0}
{"id":"arrakis-36h","title":"Sprint 10: Input Hardening + Stream Safety","status":"open","priority":2,"issue_type":"epic","created_at":"2026-02-10T03:43:24.298199002Z","created_by":"merlin","updated_at":"2026-02-10T03:43:24.318258601Z","compaction_level":0,"original_size":0,"labels":["cycle-011","sprint-10"]}
{"id":"arrakis-36t","title":"Task 3.5: AgentGateway BYOK Integration","description":"BYOK check in gateway, BYOK_NO_BUDGET accounting, platform-side metering, community quotas.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-11T01:36:04.597267751Z","created_by":"merlin","updated_at":"2026-02-11T04:15:22.799185014Z","closed_at":"2026-02-11T04:15:22.799074613Z","close_reason":"Completed BYOK integration in AgentGateway","compaction_level":0,"original_size":0,"labels":["FR-4","cycle-015","sprint-3"],"dependencies":[{"issue_id":"arrakis-36t","depends_on_id":"arrakis-3nw","type":"blocks","created_at":"2026-02-11T01:50:24.994234824Z","created_by":"merlin"},{"issue_id":"arrakis-36t","depends_on_id":"arrakis-o6d","type":"blocks","created_at":"2026-02-11T01:50:25.335930430Z","created_by":"merlin"},{"issue_id":"arrakis-36t","depends_on_id":"arrakis-ri7","type":"parent-child","created_at":"2026-02-11T01:36:04.611311765Z","created_by":"merlin"}]}
{"id":"arrakis-38f","title":"Sprint 1: Security Foundation — Pool Claims + E2E Infrastructure","description":"Establish security baseline (confused deputy prevention) and prove cross-system request flow. FR-1 + FR-2.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-02-11T01:32:55.286652107Z","created_by":"merlin","updated_at":"2026-02-11T03:40:34.553629679Z","closed_at":"2026-02-11T03:40:34.553597209Z","close_reason":"Sprint 1 complete: Pool Claim Validator (loa-finn documented), Pool Mapping Version (JWT claim added), E2E Test Infrastructure (Docker Compose, stub, 8 scenarios), Contract Artifact Package (schema, vectors, TypeScript module)","compaction_level":0,"original_size":0,"labels":["cycle-015","sprint-1"]}
{"id":"arrakis-38h","title":"S4-T2: Agent Gateway Factory","description":"- type: task","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-09T05:45:50.186146666Z","updated_at":"2026-02-09T07:59:36.428330045Z","closed_at":"2026-02-09T07:59:36.428285948Z","close_reason":"Factory wires all components, passes config overrides, initializes JwtService. GPT APPROVED iteration 2.","compaction_level":0,"original_size":0}
{"id":"arrakis-39b","title":"S3-T8: Tier Override DB Integration","description":"- type: task","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-09T05:45:50.186146666Z","updated_at":"2026-02-09T07:44:31.518125963Z","closed_at":"2026-02-09T07:44:31.517998840Z","close_reason":"Tier override DB integration: Redis cache (5min TTL), negative caching, tier validation before override, fail-open on errors. GPT APPROVED iteration 2.","compaction_level":0,"original_size":0}
{"id":"arrakis-3b6","title":"S1-T5: JWKS Express Route","description":"- type: task","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-09T05:45:50.186146666Z","updated_at":"2026-02-09T06:33:15.808285214Z","closed_at":"2026-02-09T06:33:15.808159299Z","close_reason":"JWKS route with stripPrivateJwk defense-in-depth, conditional GET (304 + timingSafeEqual ETag), Cache-Control public max-age=3600. GPT APPROVED iteration 2.","compaction_level":0,"original_size":0}
{"id":"arrakis-3b7","title":"S12-T5: Ship Gate Checklist Verification (§18)","description":"Verify all 14 ship gates. k6 load test for SG-6, benchmark harness for SG-1/SG-4, Redis Sentinel failover for SG-8.","status":"closed","priority":2,"issue_type":"task","estimated_minutes":300,"created_at":"2026-02-10T03:44:04.575349970Z","created_by":"merlin","updated_at":"2026-02-10T06:25:22.260624967Z","closed_at":"2026-02-10T06:25:22.260509837Z","close_reason":"Ship gate checklist complete: 12 PASS, 2 CONDITIONAL PASS (staging benchmarks), 176 tests, k6 load script committed, ship-gate-results.md created","compaction_level":0,"original_size":0,"labels":["cycle-011","sprint-12"],"dependencies":[{"issue_id":"arrakis-3b7","depends_on_id":"arrakis-1nx","type":"blocks","created_at":"2026-02-10T03:45:26.295411273Z","created_by":"merlin"},{"issue_id":"arrakis-3b7","depends_on_id":"arrakis-1ox","type":"blocks","created_at":"2026-02-10T03:45:26.699858536Z","created_by":"merlin"},{"issue_id":"arrakis-3b7","depends_on_id":"arrakis-2gq","type":"blocks","created_at":"2026-02-10T03:45:26.018081875Z","created_by":"merlin"},{"issue_id":"arrakis-3b7","depends_on_id":"arrakis-hx5","type":"blocks","created_at":"2026-02-10T03:45:26.494908661Z","created_by":"merlin"},{"issue_id":"arrakis-3b7","depends_on_id":"arrakis-j3z","type":"parent-child","created_at":"2026-02-10T03:44:04.587660949Z","created_by":"merlin"}]}
{"id":"arrakis-3bs","title":"Task 1.4: Contract Artifact Package","description":"Package contract artifacts as versioned npm workspace package. Pin Docker base images by digest.","status":"closed","priority":2,"issue_type":"task","assignee":"merlin","created_at":"2026-02-11T01:34:05.658716073Z","created_by":"merlin","updated_at":"2026-02-11T03:34:08.487643818Z","closed_at":"2026-02-11T03:34:08.487601355Z","close_reason":"Contract artifact package created: package.json, JSON Schema, test vectors, TypeScript index","compaction_level":0,"original_size":0,"labels":["FR-2","cycle-015","sprint-1"],"dependencies":[{"issue_id":"arrakis-3bs","depends_on_id":"arrakis-38f","type":"parent-child","created_at":"2026-02-11T01:34:05.672650203Z","created_by":"merlin"}]}
{"id":"arrakis-3bw","title":"S3-T1: Budget Reserve Lua Script","description":"- type: task","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-09T05:45:50.186146666Z","updated_at":"2026-02-09T07:20:28.221374250Z","closed_at":"2026-02-09T07:20:28.221284150Z","close_reason":"Budget reserve Lua with input validation, idempotency, warning threshold. GPT iteration 2: limit key TTL rejected (SDD §5.1: persistent, no TTL by design).","compaction_level":0,"original_size":0}
{"id":"arrakis-3do","title":"S5-T7: Security Hardening","description":"- type: task","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-09T05:45:50.186146666Z","updated_at":"2026-02-09T08:27:49.266114098Z","closed_at":"2026-02-09T08:27:49.266019771Z","close_reason":"Security hardening: key rotation script with 48h overlap, Secrets Manager integration, dry-run support, verification","compaction_level":0,"original_size":0}
{"id":"arrakis-3fh","title":"S3-T4: Budget Manager","description":"- type: task","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-09T05:45:50.186146666Z","updated_at":"2026-02-09T07:37:30.990598212Z","closed_at":"2026-02-09T07:37:30.990463430Z","close_reason":"Budget Manager implemented with normalizeCostCents, fail-closed BUDGET_EXCEEDED, NOSCRIPT retry, correct estimateCost pricing. GPT APPROVED iteration 2.","compaction_level":0,"original_size":0}
{"id":"arrakis-3ht","title":"S3-T6: Database Schema + Migration","description":"- type: task","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-09T05:45:50.186146666Z","updated_at":"2026-02-09T07:37:31.160499871Z","closed_at":"2026-02-09T07:37:31.160393336Z","close_reason":"Database schema created: community_agent_config + agent_usage_log tables with Drizzle ORM, idempotency index, community-month index.","compaction_level":0,"original_size":0}
{"id":"arrakis-3i5","title":"S10-T4: ALREADY_RESERVED Idempotent Handling (IMP-001)","description":"Map ALREADY_RESERVED Lua response to successful RESERVED in parseBudgetResult().","status":"closed","priority":2,"issue_type":"task","estimated_minutes":60,"created_at":"2026-02-10T03:44:02.318230844Z","created_by":"merlin","updated_at":"2026-02-10T04:19:28.413739620Z","closed_at":"2026-02-10T04:19:28.413645849Z","close_reason":"ALREADY_RESERVED idempotent handling verified: parseBudgetResult maps correctly, debug log on idempotent hit, 6 unit tests","compaction_level":0,"original_size":0,"labels":["cycle-011","sprint-10"],"dependencies":[{"issue_id":"arrakis-3i5","depends_on_id":"arrakis-36h","type":"parent-child","created_at":"2026-02-10T03:44:02.329959026Z","created_by":"merlin"}]}
{"id":"arrakis-3ka","title":"Sprint 11: Protocol Correctness + Idempotency","status":"open","priority":2,"issue_type":"epic","created_at":"2026-02-10T03:43:24.519921799Z","created_by":"merlin","updated_at":"2026-02-10T03:43:24.530646081Z","compaction_level":0,"original_size":0,"labels":["cycle-011","sprint-11"]}
{"id":"arrakis-3m7","title":"S3-T3: Budget Reaper Lua Script","description":"- type: task","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-09T05:45:50.186146666Z","updated_at":"2026-02-09T07:26:30.752271485Z","closed_at":"2026-02-09T07:26:30.752228291Z","close_reason":"Budget reaper Lua with unconditional DEL, counter clamping, input validation. GPT approved iteration 2.","compaction_level":0,"original_size":0}
{"id":"arrakis-3mp","title":"Task 4.4: Graduate Pool Claims to Reject Mode","description":"7-day timebox. Preflight mismatch=0 for 24h, staged rollout (internal first), escalation path.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-11T01:36:32.944980371Z","created_by":"merlin","updated_at":"2026-02-11T04:22:59.732495406Z","closed_at":"2026-02-11T04:22:59.732402489Z","close_reason":"Graduated pool claim default from warn to reject, created preflight script","compaction_level":0,"original_size":0,"labels":["FR-1","cycle-015","security","sprint-4"],"dependencies":[{"issue_id":"arrakis-3mp","depends_on_id":"arrakis-21b","type":"parent-child","created_at":"2026-02-11T01:36:32.961068215Z","created_by":"merlin"},{"issue_id":"arrakis-3mp","depends_on_id":"arrakis-2gp","type":"blocks","created_at":"2026-02-11T01:50:26.168754406Z","created_by":"merlin"}]}
{"id":"arrakis-3nw","title":"Task 3.2: BYOK Manager","description":"BYOKManager class: envelope encryption, in-process LRU cache (Buffers only), KMS circuit breaker, CRUD methods.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-11T01:36:03.814027035Z","created_by":"merlin","updated_at":"2026-02-11T04:04:13.014195424Z","closed_at":"2026-02-11T04:04:13.014117358Z","close_reason":"BYOK Manager + 23 unit tests covering AC-4.2, AC-4.3, AC-4.9, AC-4.14, AC-4.15, AC-4.16, AC-4.17","compaction_level":0,"original_size":0,"labels":["FR-4","cycle-015","sprint-3"],"dependencies":[{"issue_id":"arrakis-3nw","depends_on_id":"arrakis-ri7","type":"parent-child","created_at":"2026-02-11T01:36:03.828212092Z","created_by":"merlin"}]}
{"id":"arrakis-3os","title":"Task 1.3: E2E Test Infrastructure","description":"Docker Compose with Redis+PostgreSQL, loa-finn E2E stub (ES256 runtime signing), 6 test scenarios.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-11T01:34:05.428391878Z","created_by":"merlin","updated_at":"2026-02-11T03:40:10.968842440Z","closed_at":"2026-02-11T03:40:10.968814002Z","close_reason":"E2E infrastructure created: docker-compose.e2e.yml (Redis+PG digest-pinned), loa-finn-e2e-stub.ts (ES256 keygen, JWKS, JWT validation, contract matching), agent-gateway-e2e.test.ts (8 scenarios). GPT review skipped due to API network error.","compaction_level":0,"original_size":0,"labels":["FR-2","cycle-015","sprint-1"],"dependencies":[{"issue_id":"arrakis-3os","depends_on_id":"arrakis-38f","type":"parent-child","created_at":"2026-02-11T01:34:05.443468093Z","created_by":"merlin"},{"issue_id":"arrakis-3os","depends_on_id":"arrakis-3bs","type":"blocks","created_at":"2026-02-11T01:50:23.856491678Z","created_by":"merlin"}]}
{"id":"arrakis-3r8","title":"Task 2.4: Ensemble E2E Test Scenario","description":"E2E tests: best_of_n round-trip + partial failure drift=0 scenario.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-02-11T01:35:33.657800181Z","created_by":"merlin","updated_at":"2026-02-11T03:55:59.168234560Z","closed_at":"2026-02-11T03:55:59.168188882Z","close_reason":"Added invoke_ensemble_partial_failure test vector and E2E scenario validating committed ≤ reserved under partial failure","compaction_level":0,"original_size":0,"labels":["FR-2","FR-3","cycle-015","sprint-2"],"dependencies":[{"issue_id":"arrakis-3r8","depends_on_id":"arrakis-fj5","type":"parent-child","created_at":"2026-02-11T01:35:33.676707036Z","created_by":"merlin"}]}
{"id":"arrakis-3tf","title":"S4-T5: Community Agent Config Admin API","description":"- type: task","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-09T05:45:50.186146666Z","updated_at":"2026-02-09T08:17:37.350236746Z","closed_at":"2026-02-09T08:17:37.350207170Z","close_reason":"Admin agent config API complete: GET/PUT/enable/disable with zod validation, audit logging, immediate Redis sync, admin auth","compaction_level":0,"original_size":0}
{"id":"arrakis-49n","title":"S5-T6: Load Tests","description":"- type: task","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-09T05:45:50.186146666Z","updated_at":"2026-02-09T08:27:49.115517212Z","closed_at":"2026-02-09T08:27:49.115354722Z","close_reason":"Load tests: steady state (100 req/min), peak burst (1000 req/min), budget stress (100 concurrent)","compaction_level":0,"original_size":0}
{"id":"arrakis-59a","title":"S5-T1: Discord /agent Command","description":"- type: task","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-09T05:45:50.186146666Z","updated_at":"2026-02-09T08:25:10.028742291Z","closed_at":"2026-02-09T08:25:10.028698897Z","close_reason":"Discord /agent command: streaming with throttled edits, 2000 char truncation, error messages, budget warnings, rate limit retry-after","compaction_level":0,"original_size":0}
{"id":"arrakis-6zc","title":"S11-T2: Per-Platform Idempotency Key Derivation (§9.4, IMP-010)","description":"Replace UUIDv4 fallback with deterministic platform-derived keys. Discord interaction.id, Telegram update_id, HTTP header passthrough.","status":"closed","priority":2,"issue_type":"task","estimated_minutes":180,"created_at":"2026-02-10T03:44:02.936009712Z","created_by":"merlin","updated_at":"2026-02-10T04:42:04.511082834Z","closed_at":"2026-02-10T04:42:04.510967914Z","close_reason":"Per-platform deterministic idempotency key derivation via deriveIdempotencyKey() in Discord (interaction.id) and Telegram (update_id). StreamResumeLostError handling in both bot error handlers. HTTP passthrough via existing auth middleware.","compaction_level":0,"original_size":0,"labels":["cycle-011","sprint-11"],"dependencies":[{"issue_id":"arrakis-6zc","depends_on_id":"arrakis-1kq","type":"blocks","created_at":"2026-02-10T03:45:25.016262999Z","created_by":"merlin"},{"issue_id":"arrakis-6zc","depends_on_id":"arrakis-3ka","type":"parent-child","created_at":"2026-02-10T03:44:02.948495168Z","created_by":"merlin"}]}
{"id":"arrakis-9ik","title":"S3-T9: Budget Config Provider","description":"- type: task","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-09T05:45:50.186146666Z","updated_at":"2026-02-09T07:47:01.172026504Z","closed_at":"2026-02-09T07:47:01.171922956Z","close_reason":"Budget config provider: sync limits to Redis (persistent, no TTL), 5min refresh job, monthly reset with distributed lock (30s TTL), normalizeBudgetCents validation. GPT APPROVED iteration 2.","compaction_level":0,"original_size":0}
{"id":"arrakis-arf","title":"S5-T5: Integration Tests","description":"- type: task","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-09T05:45:50.186146666Z","updated_at":"2026-02-09T08:27:48.954560739Z","closed_at":"2026-02-09T08:27:48.954514684Z","close_reason":"Integration tests: SSE streaming, drop recovery, circuit breaker, budget concurrent, contract version gating, finalization idempotency","compaction_level":0,"original_size":0}
{"id":"arrakis-bxi","title":"S5-T3: Terraform Infrastructure Changes","description":"- type: task","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-09T05:45:50.186146666Z","updated_at":"2026-02-09T08:23:18.766875297Z","closed_at":"2026-02-09T08:23:18.766829640Z","close_reason":"Terraform changes: JWT signing key secret, agent env vars, stopTimeout 120s, IAM policy, Redis CloudWatch alarms","compaction_level":0,"original_size":0}
{"id":"arrakis-c33","title":"S16-T4: Initial Tier Assignment Script","description":"Script to assign tiers to existing members. Calculate tier for all existing members, assign based on rank and BGT, log all assignments, idempotent (safe to run multiple times).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-24T09:59:37.457152868Z","updated_at":"2025-12-24T10:29:52.067423132Z","closed_at":"2025-12-24T10:29:52.067423132Z","close_reason":"Created assign-initial-tiers.ts script with --dry-run support, idempotent execution, tier calculation and Discord role sync","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"arrakis-c33","depends_on_id":"arrakis-wt7","type":"blocks","created_at":"2026-01-29T02:03:48Z","created_by":"import"}]}
{"id":"arrakis-c57","title":"Task 2.1: Fix Network Firewall alarm to monitor all AZs","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-11T06:31:09.239631019Z","created_by":"merlin","updated_at":"2026-02-11T06:36:20.066033317Z","closed_at":"2026-02-11T06:36:20.065891854Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"arrakis-c57","depends_on_id":"arrakis-1uy","type":"parent-child","created_at":"2026-02-11T06:31:09.262230926Z","created_by":"merlin"}]}
{"id":"arrakis-fj5","title":"Sprint 2: Ensemble Strategy Exposure","description":"Expose multi-model orchestration to arrakis API consumers. FR-3.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-02-11T01:32:55.532595277Z","created_by":"merlin","updated_at":"2026-02-11T03:56:04.864365333Z","closed_at":"2026-02-11T03:56:04.864313936Z","close_reason":"Sprint 2 complete: Ensemble strategy exposure (FR-3) — mapper, gateway integration, API route/JWT extension, E2E tests","compaction_level":0,"original_size":0,"labels":["cycle-015","sprint-2"],"dependencies":[{"issue_id":"arrakis-fj5","depends_on_id":"arrakis-38f","type":"blocks","created_at":"2026-02-11T01:50:22.487583451Z","created_by":"merlin"}]}
{"id":"arrakis-flr","title":"Export TierService from services/index.ts","description":"Housekeeping: TierService exists but is not exported from services/index.ts. Quick fix from the riding session recommendations.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-24T10:00:08.968380995Z","updated_at":"2025-12-24T10:03:17.108413450Z","closed_at":"2025-12-24T10:03:17.108413450Z","close_reason":"Exported TierService from services/index.ts with constants TIER_THRESHOLDS, TIER_ORDER, TIER_INFO. Also fixed minor type issue in getNextTier method.","compaction_level":0,"original_size":0}
{"id":"arrakis-ga8","title":"S10-T2: Stream Abort Propagation (IMP-002)","description":"Wire AbortController from downstream client disconnect to upstream loa-finn. Reconciliation enqueue in finally block.","status":"closed","priority":2,"issue_type":"task","estimated_minutes":240,"created_at":"2026-02-10T03:44:01.972355168Z","created_by":"merlin","updated_at":"2026-02-10T04:13:52.562785706Z","closed_at":"2026-02-10T04:13:52.562737144Z","close_reason":"Stream abort propagation: AbortSignal.any() in loa-finn, finally-block reconciliation in gateway, signal passthrough from Express, reader.cancel(), Buffer.byteLength for SSE overflow","compaction_level":0,"original_size":0,"labels":["cycle-011","sprint-10"],"dependencies":[{"issue_id":"arrakis-ga8","depends_on_id":"arrakis-36h","type":"parent-child","created_at":"2026-02-10T03:44:01.985068610Z","created_by":"merlin"}]}
{"id":"arrakis-gth","title":"Sprint 0: loa-finn Tech Debt + Trust Boundary","status":"open","priority":2,"issue_type":"epic","created_at":"2026-02-09T05:44:59.617346798Z","created_by":"merlin","updated_at":"2026-02-09T05:44:59.645264536Z","compaction_level":0,"original_size":0,"labels":["cycle-010","sprint-0"]}
{"id":"arrakis-hx5","title":"S12-T3: PII Redaction Audit (§16, NF-RET-1/3)","description":"Audit all structured log sites. Verify AGENT_REDACT_PATHS, redactWallet(), PII regex. Log scan with zero matches.","status":"closed","priority":2,"issue_type":"task","estimated_minutes":120,"created_at":"2026-02-10T03:44:04.166050292Z","created_by":"merlin","updated_at":"2026-02-10T06:01:29.753035308Z","closed_at":"2026-02-10T06:01:29.752917947Z","close_reason":"PII redaction audit complete: 21 tests, full log site audit (40+ sites across 14 files). AGENT_REDACTION_PATHS covers 5 PII categories. hashWallet() irreversibility verified. SG-9 and SG-10 PASS. Audit report at grimoires/loa/a2a/sprint-188/pii-audit-results.md.","compaction_level":0,"original_size":0,"labels":["cycle-011","sprint-12"],"dependencies":[{"issue_id":"arrakis-hx5","depends_on_id":"arrakis-j3z","type":"parent-child","created_at":"2026-02-10T03:44:04.177962202Z","created_by":"merlin"}]}
{"id":"arrakis-itt","title":"S16-T2: RoleManagerService Extension for Tiers","description":"Extend RoleManagerService for tier role management. Implement syncTierRole(discordId, tier) method, additive role assignment, handle tier decrease edge case, graceful handling of missing role IDs.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-24T09:59:33.751188325Z","updated_at":"2025-12-24T10:07:49.623644664Z","closed_at":"2025-12-24T10:07:49.623644664Z","close_reason":"Implemented syncTierRole(), assignTierRolesUpTo(), removeAllTierRoles(), isTierRolesConfigured(), getUnconfiguredTierRoles() in roleManager.ts. Added tier audit event types. All functions exported from services/index.ts.","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"arrakis-itt","depends_on_id":"arrakis-miz","type":"blocks","created_at":"2026-01-29T02:03:48Z","created_by":"import"}]}
{"id":"arrakis-j3z","title":"Sprint 12: Ship Gate Verification","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-02-10T03:43:24.723563781Z","created_by":"merlin","updated_at":"2026-02-10T06:28:27.500096855Z","closed_at":"2026-02-10T06:28:27.499952908Z","close_reason":"Sprint 12 (Ship Gate Verification) complete: all 5 tasks closed, 176 tests passing, 14 ship gates verified","compaction_level":0,"original_size":0,"labels":["cycle-011","sprint-12"]}
{"id":"arrakis-miz","title":"S16-T1: Discord Role Setup for 9 Tiers","description":"Add environment variables and role constants for 9 tiers. Includes DISCORD_ROLE_HAJRA through DISCORD_ROLE_USUL env vars, .env.example update, TIER_ROLES mapping constant, role colors documentation.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-24T09:59:30.926447571Z","updated_at":"2025-12-24T10:05:02.731530293Z","closed_at":"2025-12-24T10:05:02.731530293Z","close_reason":"Added tier role config to schema, parseConfig, and Config interface. Added TIER_ROLE_COLORS constant, getTierRoleId(), and getMissingTierRoles() helpers. Updated .env.example with all 9 tier role IDs and documentation.","compaction_level":0,"original_size":0}
{"id":"arrakis-o6d","title":"Task 3.4: BYOK Proxy Handler + Provider Allowlist","description":"PROVIDER_ENDPOINTS map, capability-based URL resolution, SSRF defense, replay protection, Redis fail policies.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-11T01:36:04.314933511Z","created_by":"merlin","updated_at":"2026-02-11T04:10:11.030495771Z","closed_at":"2026-02-11T04:10:11.030383956Z","close_reason":"BYOK Proxy Handler + Provider Allowlist + 28 unit tests covering AC-4.5/4.6/4.11/4.12/4.13/4.19/4.20/4.22/4.23","compaction_level":0,"original_size":0,"labels":["FR-4","cycle-015","security","sprint-3"],"dependencies":[{"issue_id":"arrakis-o6d","depends_on_id":"arrakis-3nw","type":"blocks","created_at":"2026-02-11T01:50:24.695847045Z","created_by":"merlin"},{"issue_id":"arrakis-o6d","depends_on_id":"arrakis-ri7","type":"parent-child","created_at":"2026-02-11T01:36:04.333869046Z","created_by":"merlin"}]}
{"id":"arrakis-ri7","title":"Sprint 3: BYOK Key Management","description":"Enable communities to store and use their own provider API keys. FR-4.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-02-11T01:32:55.734127583Z","created_by":"merlin","updated_at":"2026-02-11T04:17:30.923246140Z","closed_at":"2026-02-11T04:17:30.923149669Z","close_reason":"Sprint 3 complete: All 7 BYOK tasks done — BYOKManager, admin routes, proxy handler, SSRF defense, gateway integration, E2E, Terraform","compaction_level":0,"original_size":0,"labels":["cycle-015","sprint-3"],"dependencies":[{"issue_id":"arrakis-ri7","depends_on_id":"arrakis-38f","type":"blocks","created_at":"2026-02-11T01:50:22.775715996Z","created_by":"merlin"}]}
{"id":"arrakis-t4n","title":"Test prefix issue","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T05:13:33.152781300Z","created_by":"merlin","updated_at":"2026-01-20T05:13:37.553916256Z","closed_at":"2026-01-20T05:13:37.553806796Z","close_reason":"test issue","compaction_level":0,"original_size":0}
{"id":"arrakis-vv7","title":"Task 3.3: BYOK Admin Routes + Integration","description":"POST/GET/DELETE/POST-rotate endpoints. Wire routes→manager→DB→KMS. Integration test lifecycle.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-11T01:36:04.063481554Z","created_by":"merlin","updated_at":"2026-02-11T04:06:40.994104987Z","closed_at":"2026-02-11T04:06:40.994015556Z","close_reason":"BYOK Admin Routes + 7 integration tests covering AC-4.1, AC-4.10, AC-4.18","compaction_level":0,"original_size":0,"labels":["FR-4","cycle-015","sprint-3"],"dependencies":[{"issue_id":"arrakis-vv7","depends_on_id":"arrakis-1c2","type":"blocks","created_at":"2026-02-11T01:50:24.406295073Z","created_by":"merlin"},{"issue_id":"arrakis-vv7","depends_on_id":"arrakis-3nw","type":"blocks","created_at":"2026-02-11T01:50:24.141738946Z","created_by":"merlin"},{"issue_id":"arrakis-vv7","depends_on_id":"arrakis-ri7","type":"parent-child","created_at":"2026-02-11T01:36:04.078880649Z","created_by":"merlin"}]}
{"id":"arrakis-wt7","title":"S16-T3: Sync Task Integration with Tiers","description":"Integrate tier updates into sync-eligibility task. Calculate tier for each member during sync, detect promotions, update Discord roles, log tier changes to history.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-24T09:59:35.581813814Z","updated_at":"2025-12-24T10:25:06.409361115Z","closed_at":"2025-12-24T10:25:06.409361115Z","close_reason":"Integrated tier calculation into sync-eligibility task. Task now calculates tier for each member during sync, updates database, syncs Discord roles, and logs tier changes to audit log. Added tier stats to return value.","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"arrakis-wt7","depends_on_id":"arrakis-itt","type":"blocks","created_at":"2026-01-29T02:03:48Z","created_by":"import"}]}
{"id":"arrakis-wvm","title":"S10-T1: Input Validation Middleware (§7.4, IMP-006)","description":"Implement input size limits and zod schema validation per SDD §7.4. Express body 128KB, zod validator, JWT 4KB check, idempotency key 128 char validation.","status":"closed","priority":2,"issue_type":"task","estimated_minutes":120,"created_at":"2026-02-10T03:44:01.794780081Z","created_by":"merlin","updated_at":"2026-02-10T04:06:01.486924359Z","closed_at":"2026-02-10T04:06:01.486806208Z","close_reason":"Input validation middleware implemented: 128KB body limit, shared idempotency key validator, Zod schema tightening, subpath exports, 30 passing tests","compaction_level":0,"original_size":0,"labels":["cycle-011","sprint-10"],"dependencies":[{"issue_id":"arrakis-wvm","depends_on_id":"arrakis-36h","type":"parent-child","created_at":"2026-02-10T03:44:01.817427587Z","created_by":"merlin"}]}
{"id":"arrakis-wzf","title":"S4-T4: Agent Module Index + Re-exports","description":"- type: task","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-09T05:45:50.186146666Z","updated_at":"2026-02-09T08:18:07.532103485Z","closed_at":"2026-02-09T08:18:07.532072637Z","close_reason":"Agent module index updated with Sprint 4 exports: AgentGateway, auth middleware, factory, admin config routes","compaction_level":0,"original_size":0}
{"id":"arrakis-z24","title":"S3-T7: Budget Reaper BullMQ Job","description":"- type: task","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-09T05:45:50.186146666Z","updated_at":"2026-02-09T07:42:15.060395714Z","closed_at":"2026-02-09T07:42:15.060293380Z","close_reason":"Budget reaper BullMQ job: 60s repeatable, per-community reap with error isolation, info/debug logging. GPT APPROVED iteration 2.","compaction_level":0,"original_size":0}
